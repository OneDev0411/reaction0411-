<template name="productImageGallery">
{{#with variant.medias}}
  <div class="product-image">
    {{#if firstImage}}
        <div class="product-image-main">
          <img class="img-responsive" name="main-image" src="{{firstImage.src}}">
        </div>
      {{#if userHasRole "admin"}}
        <div class="gallery-tools">
          <a><i class="fa fa-link"></i></a>
          <a><i class="fa fa-paperclip"></i></a>
          <a><i class="fa fa-pencil"></i></a>
          <a class="image-remove-link"><i class="fa fa-trash-o"></i></a>
        </div>
      {{/if}}
    {{/if}}
  </div>
  <div id="galleryDropPane" class="galleryDropPane">
    <ul class="gallery">
    {{#foreach .}}
      {{#isimage mimeType}}
        <!-- No more images -->
      {{else}}
      <li data-index="{{index}}" class="sortable">
        <div class="view-image">
          <img src="{{src}}" class="img-thumbnail" alt="{{title}}">
        </div>
      </li>
      {{/isimage}}
      {{#isvideo mimeType}}
        <li data-index="{{index}}" class="sortable video">
          <video class="video-js vjs-default-skin" width="250px" preload="auto" data-setup='{"example_option":true}' controls>
            <source src="{{src}}" type="{{mimeType}}">
            Your browser does not support the video tag.
          </video>
        </li>
      {{/isvideo}}
    {{/foreach}}
    </ul>
    {{#if userHasRole "admin"}}
      <button type="button" class="btn btn-default btn-lg btn-block imageAddButton">Add media</button>
    {{/if}}
</div>
{{else}}
<div id="galleryDropPane" class="galleryDropPane">
  <img src="../../resources/placeholder.jpeg">
</div>
  {{#if userHasRole "admin"}}
  <p>
    <button type="button" class="btn btn-danger btn-lg btn-block imageAddButton">Add media</button>
  </p>
  {{/if}}
{{/with}}
</template>