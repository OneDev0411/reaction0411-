<template name="dashboard">
    <!-- BEGIN Main Content -->
    <div class="row">
        <h1>Hello {{fname}}</h1>
        {{> activePkgGrid}}
        {{> availablePkgGrid}}
    </div>
    <!-- END Main Content -->
</template>

<template name="activePkgGrid">
    <h2>Your apps</h2>
    <div class="well well-sm">
      <div class="pkg-container">
        {{#if hasUserConfig}}
            {{#each UserConfig}}
                {{>widget}}
            {{/each}}
        {{else}}
        <h1><i class="fa fa-arrow-circle-down fa-5x"></i> Psst! Go ahead, add some apps!</h1>
        {{/if}}
      </div>
    </div>
</template>

<template name="availablePkgGrid">
    <h2>App Gallery</h2>
    <div class="well well-sm">
      <div class="apps-container">
        {{#each ReactionPackages}}
        {{>pkg}}

        {{/each}}
      </div>
    </div>
</template>

<template name="widget">
    <div class="tile tile-{{tileColors}}" id="{{_id}}">

        <i class="{{icon}}"></i>
        <div class="content">
            <p class="big">{{label}}</p>
        </div>
        <div class="status">
            <a href="{{pathFor route}}" class="pull-right">
                <span class="fa-stack fa-2x">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-bar-chart-o fa-stack-1x fa-inverse"></i>
                </span>
            </a>
            <a href="{{pathFor route}}" class="pull-right">
                <span class="fa-stack fa-2x">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-cogs fa-stack-1x fa-inverse"></i>
                </span>
            </a>
        </div>
        <div class="packages">
            <ul class="list-unstyled">
                {{#each children}}
                    <li><a href="{{route}}">{{label}}</a></li>
                {{/each}}
            </ul>
        </div>
        <div class="widget">
            {{{getTemplate name "widget"}}}
            {{widget}}
        </div>
    </div>
</template>


<template name="pkg">
    <div class="tile tile-{{tileColors}}" id="{{_id}}">
        <div class="img"><i class="{{icon}}"></i></div>
        <div class="content">
            <p class="big">{{label}}</p>
            <p class="title">{{{description}}}</p>
        </div>
        <div class="status">
            {{#unless type}}
                {{#if enabledPackage _id}}
                    <a class="pull-right disablePkg">
                        <i class="fa fa-minus-circle fa-4x"></i>
                    </a>
                {{else}}
                    <a class="pull-right enablePkg">
                        <i class="fa fa-plus-circle fa-4x"></i>
                    </a>
                {{/if}}
            {{/unless}}
        </div>
    </div>
</template>