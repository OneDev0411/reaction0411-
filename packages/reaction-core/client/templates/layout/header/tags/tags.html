<template name="headerTags">
    {{>tagsComponent tags=tags}}
</template>

<template name="headerLinks">
  <ul class="tag-link-list">




    {{#each ./tags}}
      <li class="nav-dropbar-toplevel {{activeTag}}">
        <a
          href="{{pathForSEO "product/tag" "slug"}}"
          class="header-tag"
          id="tag-{{_id}}"
          data-tag-id="{{_id}}"
          data-event-category="tag"
          data-event-action="tag-click"
          data-event-label="navigation tag click"
          data-event-value="{{name}}">
          {{name}}
        </a>




        <div class="nav-dropbar">
          {{#if subTags .}}
            <div class="rui items flex">

              {{#each tagGroup in (subTags .)}}
                <div class="rui item">
                  <div class="rui header">
                    {{> React component=Tag tag=tagGroup editable=isEditing}}
                  </div>

                  <div class="rui content">
                    {{> React
                      component=Tags
                      tags=(subTags tagGroup)
                      editable=isEditing
                      parentTag=tagGroup
                      onTagUpdate=handleTagUpdate
                      onTagSort=handleTagSort
                      onTagRemove=handleTagRemove
                      onTagDragAdd=handleTagDragAdd
                    }}
                  </div>

                  {{#if isEditing}}
                    <div>
                      {{> React
                        component=Tag
                        blank=true
                        onTagCreate=handleTagCreate
                        parentTag=tagGroup
                      }}
                    </div>
                  {{/if}}
                </div>

              {{/each}}
            </div>
          {{/if}}


          <button class="btn btn-default" data-event-action="editTags">
            <i class="fa fa-pencil"></i> <span>Edit Tags</span>
          </button>
        </div>



        {{!--
        {{#unless isEditing}}



          <div class="nav-dropbar">




            <ul class="tagGroup">
              {{#each subTags .}}
                <li class="tagItem">
                  <a
                    href="{{pathForSEO "product/tag" "slug"}}"
                    class="header-tag"
                    id="tag-{{_id}}"
                    data-tag-id="{{_id}}"
                    data-event-category="tag"
                    data-event-action="tag-click"
                    data-event-label="navigation tag click"
                    data-event-value="{{name}}">
                    <strong>{{name}}</strong>
                  </a>


                  {{> relatedTags .}}




                </li>

              {{else}}
                <li class="tagItem">
                  <div class="empty-tag-group">
                    <i class="fa fa-plus-circle"></i>
                    <label>No Sub Tags, Add one?</label>
                    {{> tagInputField parentTag=.}}
                  </div>
                </li>
              {{/each}}

              <li>
                <button class="btn btn-default" data-event-action="editTags">
                  <i class="fa fa-pencil"></i> <span>Edit Tags</span>
                </button>
              </li>
            </ul>
          </div>
        {{else}}

          <div class="nav-dropbar">
            <ul class="tagGroup">
              {{#each subTags .}}
                <li class="tagItem">
                  {{> tagInputField parentTag=.. tag=.}}
                  {{> relatedTagsForm .}}
                </li>

              {{else}}
                <li class="tagItem">
                  <div class="empty-tag-group">
                    <i class="fa fa-plus-circle"></i>
                    <label>No Sub Tags, Add one?</label>
                    {{> tagInputField .}}
                  </div>
                </li>
              {{/each}}


              <li class="tagItem">
                <div class="empty-tag-group">
                  <i class="fa fa-plus-circle"></i>
                  <label>Add Tag Group</label>
                  {{> tagInputField ..}}
                </div>
              </li>

              <li>
                <button class="btn btn-default" data-event-action="editTags">
                  <i class="fa fa-pencil"></i> <span>Done</span>
                </button>
              </li>
            </ul>
          </div>

        {{/unless}}

--}}
      </li>
    {{/each}}









    {{#if hasPermission "admin"}}
      <li>
        <button id="header-edit-tag" class="btn btn-primary header-edit-tag" data-current-id="{{tag._id}}">
          <i class="fa fa-tags fa-lg"></i> <span data-i18n="header.tagsAdd">Add Tag</span>
        </button>
      </li>
    {{/if}}
  </ul>
</template>

<template name="relatedTags">
  <ul class="tagGroup">
    {{#each subTags .}}
      <li class="tagItem">


        <a
          href="{{pathForSEO "product/tag" "slug"}}"
          class="header-tag"
          id="tag-{{_id}}"
          data-tag-id="{{_id}}"
          data-event-category="tag"
          data-event-action="tag-click"
          data-event-label="navigation tag click"
          data-event-value="{{name}}">
          {{name}}
        </a>
        <!-- <button class="btn btn-link" data-event-action="editTag" data-id="{{_id}}">
          <i class="fa fa-pencil"></i>
        </button> -->
      </li>
    {{/each}}
  </ul>
</template>

<template name="relatedTagsForm">
  <ul class="tagGroup">
    {{#each subTags .}}
      <li class="tagItem">
        {{> tagInputField parentTag=.. tag=. type="edit"}}
      </li>
    {{/each}}

    <li data-tag-id="{{_id}}">
      {{> tagInputField parentTag=. type="new"}}
    </li>
  </ul>
</template>



<template name="tagInputField">
  <form>
    <div class="tag-input-group">
      <span class="tag-input">
        <input
          type="text"
          class="tags-input-select tags-submit-new"
          value="{{tag.name}}"
          name="tag"
          placeholder="{{i18n 'header.tagsAdd' 'Add tag'}}" autofocus/>
      </span>
      <button class="btn btn-default" type="submit" name="button"><i class="fa fa-plus-circle"></i></button>
    </div>
  </form>
</template>

<template name="tagMenuLink">
  <a
    href="{{pathForSEO "product/tag" "slug"}}"
    class="header-tag"
    id="tag-{{_id}}"
    data-tag-id="{{_id}}"
    data-event-category="tag"
    data-event-action="tag-click"
    data-event-label="navigation tag click"
    data-event-value="{{name}}">
    {{name}}
  </a>
</template>

<template name="tagInputForm">
<ul class="list-inline tag-edit-list" id="tag-edit-list">
{{#each ./tags}}
  <li data-tag-id="{{_id}}">
    <div class="tag-input-group">
      <span class="tag-input-group-handle">
        <i class="fa fa-bars fa-lg"></i>
      </span>
      <span class="tag-input">
        <input type="text" class="tags-input-select" value="{{name}}" placeholder="Edit tags"/>
      </span>
      <span class="tag-input-group-remove">
         <i class="fa fa-times-circle fa-lg"></i>
      </span>
    </div>
  </li>
{{/each}}
  <li data-tag-id="{{_id}}">
    <div class="tag-input-group">
      <span class="tag-input">
        <input type="text" class="tags-input-select tags-submit-new" value="{{name}}" placeholder="{{i18n 'header.tagsAdd' 'Add tag'}}" autofocus/>
      </span>
    </div>
  </li>
</ul>
</template>
